;
; Project1-1.asm
;
; Created: 3/24/2019 6:06:13 PM
; Author : warho
;


; Replace with your application code



.org 0

    LDI R16, 0xFF
	OUT DDRC, R16
	OUT DDRD, R16
	OUT DDRE, R16
	CBI DDRA, 0
	SBI PORTA, 0
	CBI DDRA, 1
	SBI PORTA, 1
	CBI DDRA, 2
	SBI PORTA, 2
	CBI DDRA, 3
	SBI PORTA, 3

	LDI R20, 0x00
	LDI R21, 0x00
	LDI R22, 0x00

START:
	SBIC PINA, 0
	RJMP INCREMENT_PRESS
	SBIC PINA, 1
	RJMP DECREMENT_PRESS
	SBIC PINA, 2
	RJMP BUZZ
	SBIC PINA, 3
	RJMP SPIN_WHEEL_PRESS
	RJMP START

INCREMENT_PRESS:
	SBIS PINA, 0
	RJMP INCREMENT
	RJMP INCREMENT_PRESS

INCREMENT:
	INC R20
	OUT PORTD, R20
	RJMP START

DECREMENT_PRESS:
	SBIS PINA, 1
	RJMP DECREMENT
	RJMP DECREMENT_PRESS

DECREMENT:
	DEC R20
	OUT PORTD, R20
	RJMP START

BUZZ:
	SBI PORTE, 4
	RCALL DELAY1
	NOP
	NOP
	CBI PORTE, 4
	RCALL DELAY1
	SBIC PINA, 2
	RJMP BUZZ
	RJMP START

SPIN_WHEEL_PRESS:
	OUT PORTD, R16
	LDI R22, 0x01
	SBIS PINA, 3
	RJMP SPIN_WHEEL
	INC R21
	RJMP SPIN_WHEEL_PRESS

SPIN_WHEEL:
	ROR R21
	BRCC SKIP_MULT1
	LSL R22
SKIP_MULT1:
	ROR R21
	BRCC SKIP_MULT2
	LSL R22
	LSL R22
SKIP_MULT2:
	ROR R21
	BRCC SKIP_MULT3
	LSL R22
	LSL R22
	LSL R22
	LSL R22
SKIP_MULT3:
	OUT PORTD, R22
	RCALL DELAY2
	LSL R22
	BRCC FULL_SPIN1
	LDI R22, 0x01
FULL_SPIN1:
	OUT PORTD, R22
	RCALL DELAY2
	LSL R22
	BRCC FULL_SPIN2
	LDI R22, 0x01
FULL_SPIN2:
	OUT PORTD, R22
	RCALL DELAY2
	RCALL DELAY2
	LSL R22
	BRCC FULL_SPIN3
	LDI R22, 0x01
FULL_SPIN3:
	OUT PORTD, R22
	RCALL DELAY2
	RCALL DELAY2
	RCALL DELAY2
	LSL R22
	BRCC FULL_SPIN4
	LDI R22, 0x01
FULL_SPIN4:
	OUT PORTD, R22
	RCALL DELAY2
	RCALL DELAY2
	RCALL DELAY2
	RCALL DELAY2
	RCALL DELAY2
	RJMP START

DELAY1:
	LDI R17, 100
LOOP12:
	LDI R18, 13
LOOP11:
	DEC R18
	BRNE LOOP11
	DEC R17
	BRNE LOOP12
	RET

DELAY2:
	LDI R17, 9
LOOP23:
	LDI R18, 100
LOOP22:
	LDI R19, 100
LOOP21:
	DEC R19
	BRNE LOOP21
	DEC R18
	BRNE LOOP22
	DEC R17
	BRNE LOOP23
	RET
